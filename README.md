# Retro Board

Доска для ретроспектив в реальном времени. Создай доску, отправь ссылку команде и работайте вместе — без регистрации.

## Возможности

- **Три колонки**: Что прошло хорошо, Что пошло не так, Что улучшить
- **Совместная работа** в реальном времени через WebSocket (Socket.IO)
- **Голосование** (лайк/дизлайк) и **комментарии** к карточкам
- **Таймер** для ограничения обсуждений по времени
- **Тёмная тема**
- **Экспорт** доски в JSON
- **Шифрование данных** в БД (AES-256-GCM)

## Безопасность

При установке переменной `ENCRYPTION_KEY` содержимое карточек, имена авторов и комментарии шифруются на сервере алгоритмом AES-256-GCM перед записью в базу данных. При чтении — расшифровываются обратно. Без ключа данные хранятся как есть.

Старые данные, созданные до включения шифрования, продолжают работать — сервер отдаёт их без расшифровки.

## Установка

### Требования

- Node.js 18+
- PostgreSQL

### Переменные окружения

Скопируйте `.env.example` в `.env` и настройте:

```
DATABASE_URL=postgresql://retro:retro@localhost:5432/retro
PORT=3000
ORIGIN=http://localhost:3000
ENCRYPTION_KEY=           # 64 hex-символа (32 байта), пусто = без шифрования
```

Сгенерировать ключ: `openssl rand -hex 32`

### Docker

```sh
docker compose -f docker-compose.prod.yml up -d --build
```

### Разработка

```sh
npm install
npm run dev
```

## Архитектура

- **Фронтенд**: SvelteKit (Svelte 5 runes)
- **Бэкенд**: Node.js HTTP-сервер с Socket.IO + SvelteKit handler
- **База данных**: PostgreSQL через Drizzle ORM
